# vim: set ft=yaml
# yaml-language-server: $schema=values.schema.json

# @schema
# required: true
# type: string
# @schema
# -- The `groupName` here is used to identify your company or business unit that
# created this webhook.
# For example, this may be `acme.mycompany.example`.
# This name will need to be referenced in each Issuer's `webhook` stanza to
# inform cert-manager of where to send ChallengePayload resources in order to
# solve the DNS01 challenge.
# This group name should be **unique**, hence using your own company's domain
# here is recommended.
groupName: acme.mycompany.example

# @schema
# required: true
# type: object
# @schema
# -- The values below should match your cert-manager deployment.
# If not, you will get permissions errors.
certManager:

  # @schema
  # required: true
  # type: string
  # @schema
  # -- namespace in which your cert-manager is deployed
  namespace: cert-manager

  # @schema
  # required: true
  # type: string
  # default: cert-manager
  # @schema
  # -- cert-manager serverAccount name (default: cert-manager)
  serviceAccountName: cert-manager

# @schema
# required: false
# type: array
# @schema
# -- One or more issuers to create
issuers:

  # @schema
  # required: true
  # type: string
  # @schema
  # -- Name of this issuer
  - name: le-prod

    # @schema
    # required: true
    # type: boolean
    # @schema
    # -- When true this issuer is created.
    create: false

    # @schema
    # required: true
    # enum: [ClusterIssuer, Issuer]
    # @schema
    # -- The type of issuer to create. It can either be `ClusterIssuer` or `Issuer`.
    # If `Issuer` is specified, then the `namespace` is also required.
    # See https://cert-manager.io/docs/concepts/issuer/ for more information.
    kind: ClusterIssuer

    # @schema
    # required: false
    # type: string
    # @schema
    # -- If `kind` is `Issuer`, then indicate the namespace in which this issuer should be deployed into.
    namespace: default

    # @schema
    # required: true
    # type: string
    # format: uri
    # default: https://acme-v02.api.letsencrypt.org/directory
    # @schema
    # -â€“ The ACME server URL. For Let's Encrypt, you have 2 options:
    # - for production (default): `https://acme-v02.api.letsencrypt.org/directory`
    # - for staging: `https://acme-staging-v02.api.letsencrypt.org/directory`
    acmeServerUrl: https://acme-v02.api.letsencrypt.org/directory

    # @schema
    # required: true
    # type: string
    # format: idn-email
    # @schema
    # -- Email to use when registering your account with Let's Encrypt.
    email: acme@example.net

    # @schema
    # required: false
    # type: boolean
    # default: false
    # @schema
    # -- Enables or disables generating a new ACME account key.
    # If `true`, the Issuer resource will not request a new account but will expect the account key to be supplied via an existing secret.
    # If `false`, the cert-manager system will generate a new ACME account key for the Issuer.
    # Defaults to `false` when unspecified.
    # See https://cert-manager.io/docs/reference/api-docs/#acme.cert-manager.io/v1.ACMEIssuer
    disableAccountKeyGeneration: false

    # @schema
    # required: false
    # enum: [classic, tlsserver, shortlived]
    # default: classic
    # @schema
    # -- If the ACME server supports profiles, you can specify the profile name here.
    # For more details, see https://cert-manager.io/docs/configuration/acme/#acme-certificate-profiles
    # Possible profiles are: `classic`, `tlsserver`, `shortlived`.
    profile: classic

    # @schema
    # required: false
    # enum: [None, Follow]
    # default: None
    # @schema
    # -- Follow CNAME records or not. 2 options:
    # - `None` (default): Don't follow CNAME records
    # - `Follow`: Follow CNAME records
    # See https://cert-manager.io/docs/configuration/acme/dns01/#delegated-domains-for-dns01 for more information.
    cnameStrategy: None

    # @schema
    # required: false
    # type: object
    # @schema
    # -- Define the EAB (external account binding) key using `secretRef`.
    # This is optional and only required if you want to use it.
    # See https://cert-manager.io/docs/configuration/acme/#external-account-bindings for more information.
    externalAccountBinding:

      # @schema
      # required: false
      # type: boolean
      # default: false
      # @schema
      # -- When `enabled` is `true`, the external account binding configuration is applied.
      enabled: false

      # @schema
      # required: true
      # type: string
      # @schema
      # -- The key ID or account ID of which your external account binding is indexed by the external account manager
      keyID: ''

      # @schema
      # required: true
      # type: object
      # @schema
      # -- The name and key of a secret containing a base 64 encoded URL string of your external account symmetric MAC key.
      keySecretRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the EAB HMAC key.
        name: ''

        # @schema
        # required: true
        # type: string
        # @schema
        # -- The key name in the secret above that holds the actual EAB HMAC key value.
        key: ''

    # @schema
    # required: true
    # enum: [ovh-eu, ovh-ca, kimsufi-eu, kimsufi-ca, soyoustart-eu, soyoustart-ca, runabove-ca]
    # @schema
    # -- The endpoint name of the OVH API. It must be one of the following:
    # `ovh-eu`, `ovh-ca`, `kimsufi-eu`, `kimsufi-ca`, `soyoustart-eu`, `soyoustart-ca`, `runabove-ca`.
    # See https://docs.certifytheweb.com/docs/dns/providers/ovh/ for more information.
    ovhEndpointName: ovh-eu

    # @schema
    # required: true
    # enum: [application, oauth2]
    # @schema
    # -- Define how the webhook should authenticate with the OVH API. It can be either `application` or `oauth2`.
    # When `ovhAuthenticationMethod` is `application`, then use:
    #   - `ovhAuthentication.applicationKey`, `ovhAuthentication.applicationSecret`, and `ovhAuthentication.applicationConsumerKey`
    #   or
    #   - `ovhAuthenticationRef.applicationKeyRef`, `ovhAuthenticationRef.applicationSecretRef` and `ovhAuthenticationRef.applicationConsumerKeyRef`.
    #
    # When `ovhAuthenticationMethod` is `oauth2`, then use:
    #   - `ovhAuthentication.oauth2ClientID` and `ovhAuthentication.oauth2ClientSecret`
    #   or
    #   - `ovhAuthenticationRef.oauth2ClientIDRef` and `ovhAuthenticationRef.oauth2ClientSecretRef`.
    ovhAuthenticationMethod: application

    # @schema
    # required: false
    # type: object
    # @schema
    # -- Define your credentials below and the chart will create the necessary secret for you.
    # If `ovhAuthenticationMethod` is `application`, then provide:
    #   - `applicationKey`, `applicationSecret`, and `applicationConsumerKey`
    # If `ovhAuthenticationMethod` is `oauth2`, then provide:
    #   - `oauth2ClientID` and `oauth2ClientSecret`
    ovhAuthentication:

      # @schema
      # required: false
      # type: string
      # @schema
      # -- The OVH OAuth 2 client ID. Leave empty if you are using an existing secret.
      oauth2ClientID: ''

      # @schema
      # required: false
      # type: string
      # @schema
      # -- The OVH OAuth 2 client secret. Leave empty if you are using an existing secret.
      oauth2ClientSecret: ''

      # @schema
      # required: false
      # type: string
      # @schema
      # -- The OVH application key. Leave empty if you are using an existing secret.
      applicationKey: ''

      # @schema
      # required: false
      # type: string
      # @schema
      # -- The OVH application secret. Leave empty if you are using an existing secret.
      applicationSecret: ''

      # @schema
      # required: false
      # type: string
      # @schema
      # -- Your OVH consumer key. Leave empty if you are using an existing secret.
      applicationConsumerKey: ''

    # -- Define the details of a secret already containing the OVH credentials.
    # If `ovhAuthenticationMethod` is `application`, then provide:
    #   - `applicationKeyRef`, `applicationSecretRef` and `applicationConsumerKeyRef`.
    # If `ovhAuthenticationMethod` is `oauth2`, then provide:
    #   - `oauth2ClientIDRef` and `oauth2ClientSecretRef`.
    ovhAuthenticationRef:

      # @schema
      # required: false
      # type: object
      # @schema
      # -- The secret reference to an existing OVH OAuth 2 client ID.
      oauth2ClientIDRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the OVH OAuth 2 client ID
        name: ''

        # @schema
        # required: true
        # type: string
        # @schema
        # -- The key name in the secret above that holds the actual OVH OAuth 2 client ID value
        key: oauth2ClientID

      # @schema
      # required: false
      # type: object
      # @schema
      # -- The secret reference to an existing OVH Auth 2 client secret.
      oauth2ClientSecretRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the OVH Auth 2 client secret
        name: ''

        # @schema
        # required: true
        # type: string
        # default: oauth2ClientSecret
        # @schema
        # --The key name in the secret above that holds the actual OVH Auth 2 client secret value
        key: oauth2ClientSecret

      # @schema
      # required: false
      # type: object
      # @schema
      # -- The secret reference to an existing OVH application key.
      applicationKeyRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the OVH Application Key
        name: ''

        # @schema
        # required: true
        # type: string
        # default: applicationKey
        # @schema
        # -- The key name in the secret above that holds the actual OVH application key value
        key: applicationKey

      # @schema
      # required: false
      # type: object
      # @schema
      # -- The secret reference to an existing OVH application secret.
      applicationSecretRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the OVH Application Secret
        name: ''

        # @schema
        # required: true
        # type: string
        # default: applicationSecret
        # @schema
        # -- The key name in the secret above that holds the actual OVH application secret value
        key: applicationSecret

      # @schema
      # required: false
      # type: object
      # @schema
      # -- The secret reference to an existing OVH consumer key
      applicationConsumerKeyRef:

        # @schema
        # required: true
        # type: string
        # @schema
        # -- Name of the Kubernetes secret containing the OVH consumer Key
        name: ''

        # @schema
        # required: true
        # type: string
        # default: applicationConsumerKey
        # @schema
        # -- The key name in the secret above that holds the actual OVH consumer key value
        key: applicationConsumerKey

# @schema
# required: false
# type: object
# @schema
# -- RBAC configuration for the webhook deployment
rbac:
  # @schema
  # required: false
  # enum: [Role, ClusterRole]
  # default: Role
  # @schema
  # -- If the secret of the issuer is in a different namespace, change `Role` (default)
  # to `ClusterRole` so the webhook is able to access this secret.
  roleType: Role

# @schema
# required: false
# type: object
# @schema
image:

  # @schema
  # required: false
  # type: string
  # @schema
  # -- The registry to use.
  registry: 'ghcr.io'

  # @schema
  # required: false
  # type: string
  # @schema
  # -- The repository location on the registry.
  repository: aureq/cert-manager-webhook-ovh

  # @schema
  # required: false
  # type: string
  # @schema
  # -- The tag to use from the registry. It can either be a version number like `1.0.0`
  # or a digest like `sha256:abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789`.
  tag: ''

  # @schema
  # required: false
  # enum: [Always,IfNotPresent,Never]
  # default: IfNotPresent
  # @schema
  # -- The image pull policy as defined in the Kubernetes documentation.
  pullPolicy: IfNotPresent

  # @schema
  # required: false
  # type: array
  # @schema
  # -- The image pull secrets to use if your registry requires it.
  pullSecrets: []
    # - docker-registry-secret
    # - internal-registry-secret

# @schema
# required: true
# type: object
# @schema
pod:

  # @schema
  # required: false
  # additionalProperties: true
  # @schema
  # -- Extra annotations for the Pod spec. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more information.
  annotations: {}

  # @schema
  # type: object
  # required: false
  # additionalProperties: true
  # @schema
  # -- Labels to add to the Pod.
  # See https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
  podLabels: {}

  # @schema
  # type: object
  # required: false
  # additionalProperties: true
  # @schema
  # -- Annotations to add to the Pod.
  # See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
  podAnnotations: {}

  # @schema
  # type: integer
  # required: false
  # minimum: 1
  # default: 1
  # @schema
  # -- Number of replicas in this deployment.
  replicas: 1

  # @schema
  # required: false
  # type: object
  # additionalProperties: true
  # @schema
  # -- Use this option to add environment variables relevant to your deployment.
  # These fields will be passed on to the container when Chart is deployed.
  environment: {}
    # Use these variables to configure the HTTP_PROXY environment variables
    # HTTP_PROXY: "http://proxy:8080"
    # HTTPS_PROXY: "http://proxy:8080"
    # NO_PROXY: "cluster.local,127.0.0.1,localhost,10.0.0.0/8"

  # @schema
  # required: false
  # type: object
  # @schema
  # -- Define the security context for both the `Pod` and the `Container`.
  # See the Kubernetes API [reference](https://kubernetes.io/docs/reference/generated/kubernetes-api/latest/#securitycontext-v1-core) and the Kubernetes
  # [documentation](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/) for more information.
  securityContext:

    # @schema
    # required: false
    # type: object
    # properties:
    #   appArmorProfile:
    #     type: object
    #     required: false
    #     properties:
    #       localHostProfile:
    #         type: string
    #         required: false
    #       type:
    #         required: false
    #         enum: [Localhost,RuntimeDefault,Unconfined]
    #   fsGroup:
    #     type: integer
    #     required: false
    #   fsGroupChangePolicy:
    #     required: false
    #     enum: [Always,OnRootMismatch]
    #   runAsGroup:
    #     type: integer
    #     required: false
    #   runAsNonRoot:
    #     type: boolean
    #     required: false
    #   runAsUser:
    #     type: integer
    #     required: false
    #   seLinuxChangePolicy:
    #     required: false
    #     enum: [MountOption,Recursive]
    #   seLinuxOptions:
    #     type: object
    #     required: false
    #     properties:
    #       level:
    #         type: string
    #         required: false
    #       role:
    #         type: string
    #         required: false
    #       type:
    #         type: string
    #         required: false
    #       user:
    #         type: string
    #         required: false
    #   seccompProfile:
    #     type: object
    #     required: false
    #     properties:
    #       localhostProfile:
    #         type: string
    #         required: false
    #       type:
    #         required: false
    #         enum: [Localhost,RuntimeDefault,Unconfined]
    #   supplementalGroups:
    #     type: array
    #     items:
    #       type: integer
    #       required: false
    #     required: false
    #   supplementalGroupsPolicy:
    #     required: false
    #     enum: [Merge,Strict]
    #   sysctls:
    #     type: array
    #     items:
    #       type: object
    #       required: false
    #       properties:
    #         name:
    #           type: string
    #           required: true
    #         value:
    #           type: string
    #           required: true
    # @schema
    # -- Pod Security Context.
    pod:
      runAsUser: 1000
      runAsGroup: 1000

    # @schema
    # required: false
    # type: object
    # properties:
    #   allowPrivilegeEscalation:
    #     type: boolean
    #     required: false
    #   appArmorProfile:
    #     type: object
    #     required: false
    #     properties:
    #       localHostProfile:
    #         type: string
    #         required: false
    #       type:
    #         required: false
    #         enum: [Localhost,RuntimeDefault,Unconfined]
    #   capabilities:
    #     type: object
    #     required: false
    #     properties:
    #       add:
    #         type: array
    #         required: false
    #         items:
    #           type: string
    #           required: false
    #       drop:
    #         type: array
    #         required: false
    #         items:
    #           type: string
    #           required: false
    #   privileged:
    #     type: boolean
    #     required: false
    #   procMount:
    #     type: string
    #     required: false
    #   readOnlyRootFilesystem:
    #     type: boolean
    #     required: false
    #   runAsGroup:
    #     type: integer
    #     required: false
    #   runAsNonRoot:
    #     type: boolean
    #     required: false
    #   runAsUser:
    #     type: integer
    #     required: false
    #   seLinuxOptions:
    #     type: object
    #     required: false
    #     properties:
    #       level:
    #         type: string
    #         required: false
    #       role:
    #         type: string
    #         required: false
    #       type:
    #         type: string
    #         required: false
    #       user:
    #         type: string
    #         required: false
    #   seccompProfile:
    #     type: object
    #     required: false
    #     properties:
    #       localhostProfile:
    #         type: string
    #         required: false
    #       type:
    #         required: false
    #         enum: [Localhost,RuntimeDefault,Unconfined]
    # @schema
    # -- Container Security Context.
    container:
      readOnlyRootFilesystem: true
      allowPrivilegeEscalation: false
      privileged: false

  # @schema
  # required: false
  # type: integer
  # minimum: 1
  # maximum: 65535
  # default: 8443
  # @schema
  # -- The port used by the webhook to receive incoming traffic from the service.
  # It may be useful to change it if the hostNetwork mode is activated to use an available port.
  port: 8443

  # @schema
  # type: boolean
  # required: false
  # default: false
  # @schema
  # -- Specifies if the webhook should be started in `hostNetwork` mode.
  # Required for use in some managed Kubernetes clusters (such as AWS EKS) with custom
  # CNI (such as Calico), because control-plane managed by AWS cannot communicate
  # with pods' IP CIDR and admission webhooks are not working.
  hostNetwork: false

  # @schema
  # required: false
  # type: string
  # @schema
  # -- The optional priority class to be used for the cert-manager-webhook-ovh pod.
  priorityClassName: ''

  # @schema
  # required: false
  # type: object
  # @schema
  # -- We usually recommend not to specify default resources and to leave this as a conscious choice for the user.
  # This also increases chances charts run on environments with little resources, such as Minikube.
  # If you do want to specify resources, adjust them as necessary as shown below.
  resources:

    # @schema
    # required: false
    # additionalProperties: true
    # @schema
    # -- Resource Requests.
    requests: {}
    # requests:
    #   cpu: 100m
    #   memory: 64Mi

    # @schema
    # required: false
    # additionalProperties: true
    # @schema
    # -- Resource Limits.
    limits: {}
    # limits:
    #   cpu: 200m
    #   memory: 96Mi

  # @schema
  # required: false
  # type: object
  # @schema
  selectors:

    # @schema
    # required: false
    # additionalProperties: true
    # @schema
    # -- Node selector. See https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/ for more information.
    nodeSelector: {}
    # nodeSelector:
    #   disktype: 'ssd'
    #   kubernetes.io/hostname: 'worker-1'

    # @schema
    # required: false
    # additionalProperties: true
    # @schema
    # -- Affinity selectors. See https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes-using-node-affinity/ for more information.
    affinity: {}
    # affinity:
    #   nodeAffinity:
    #     requiredDuringSchedulingIgnoredDuringExecution:
    #       nodeSelectorTerms:
    #       - matchExpressions:
    #         - key: 'kubernetes.io/hostname'
    #           operator: 'In'
    #           values:
    #           - 'worker-1'
    #           - 'worker-2'
    #     preferredDuringSchedulingIgnoredDuringExecution:
    #     - weight: 1
    #       preference:
    #         matchExpressions:
    #         - key: 'node-label-key'
    #           operator: 'NotIn'
    #           values:
    #           - 'not-this'
    #   podAffinity:
    #     requiredDuringSchedulingIgnoredDuringExecution:
    #     - labelSelector:
    #         matchExpressions:
    #         - key: 'security'
    #           operator: 'In'
    #           values:
    #           - S1
    #       topologyKey: 'topology.kubernetes.io/zone'
    #   podAntiAffinity:
    #       preferredDuringSchedulingIgnoredDuringExecution:
    #       - weight: 100
    #         podAffinityTerm:
    #           labelSelector:
    #             matchExpressions:
    #             - key: 'security'
    #               operator: 'In'
    #               values:
    #               - S2
    #           topologyKey: 'topology.kubernetes.io/zone'

# @schema
# required: false
# type: string
# @schema
# -- Override the name of the deployed resources
nameOverride: ""

# @schema
# required: false
# type: string
# @schema
# -- Override the full name of the deployed resources
fullnameOverride: ""


# @schema
# required: true
# type: object
# @schema
# -- Service configuration for the webhook deployment.
service:

  # @schema
  # required: true
  # enum: [ClusterIP, NodePort, LoadBalancer]
  # default: ClusterIP
  # @schema
  # -- The service type to use.
  type: ClusterIP

  # @schema
  # required: true
  # type: integer
  # minimum: 1
  # maximum: 65535
  # default: 443
  # @schema
  # -- The port used by the service.
  port: 443

  # @schema
  # required: false
  # additionalProperties: true
  # @schema
  # -- Extra annotations for the service. See https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/ for more information.
  annotations: {}

# @schema
# type: array
# required: false
# items:
#   type: string
# @schema
# -- Create dynamic manifests via values.
#
# For example:
# extraObjects:
#   - |
#     apiVersion: v1
#     kind: ConfigMap
#     metadata:
#       name: '{{ template "cert-manager.fullname" . }}-extra-configmap'
extraObjects: []
